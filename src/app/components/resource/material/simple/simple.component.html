<app-topbar class="mb-6"></app-topbar>
         <p-toolbar styleClass="mb-6 mt-9">
        </p-toolbar>

        <div class="flex justify-center mb-6">
          <div class="w-full p-4">
            <p-table
            #dt
            [value]="products()"
            [rows]="10"
            [paginator]="true"
            [globalFilterFields]="['proceso_contratacion', 'country.proceso_contratacion', 'representative.proceso_contratacion', 'status']"
            [tableStyle]="{ 'min-width': '555rem' }"
            [(selection)]="selectedProducts"
            [rowHover]="true"
            dataKey="id"
            currentPageReportTemplate="Mostrando {first} de {last} of {totalRecords} Partidas"
            [showCurrentPageReport]="true"
            [rowsPerPageOptions]="[10, 20, 30]"
            [showGridlines]="true"
            [columns]="selectedColumns"
            [reorderableColumns]="true"
            [scrollable]="true"
            scrollHeight="500px"
        >
            <ng-template #caption>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 p-4">
                      <div class="flex items-center space-x-2">
                        <p-button icon="pi pi-filter-fill" class="mr-2" />
                        <p-multiselect display="chip" [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header" selectedItemsLabel="{0} columns selected" [style]="{ 'min-width': '200px' }" placeholder="Choose Columns" />
                        <p-iconfield class="flex items-center">
                        <p-inputicon styleClass="pi pi-search" />
                        <input pInputText type="text" (input)="onGlobalFilter(dt, $event)" placeholder="Referencia" class="border rounded-md p-2 w-full" />
                        </p-iconfield>
                      </div>
                    </div>
            </ng-template>
            <ng-template #header>
                <tr>
                    <th *ngFor="let col of selectedColumns" pReorderableColumn pSortableColumn="{{ col.field }}" pColumnFilter>
                        {{ col.header }}
                          <p-sortIcon field="{{ col.field }}" />
                    </th>
                    <!-- <th style="min-width: 8rem">Acciones</th> -->
                </tr>
            </ng-template>
            <ng-template #body let-product>
                    <tr>
                        <td *ngFor="let col of selectedColumns" (click)="editProduct(product)" class="cursor-pointer">
                          <ng-container *ngIf="col.field === 'image'; else textContent">
                            <img [src]="product[col.field]" alt="Imagen del producto" style="width: 50px; height: 40px;">
                          </ng-container>
                          <ng-template #textContent>{{ product[col.field] || '- Sin informaci√≥n -'}}</ng-template>
                        </td>
                      </tr>
            </ng-template>
            </p-table>
          </div>
        </div>
        <p-confirmdialog [style]="{ width: '450px' }" />

        <app-footer></app-footer>



